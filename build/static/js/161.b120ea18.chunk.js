"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[161],{4161:(e,t,s)=>{s.r(t),s.d(t,{default:()=>p});var o=s(5043),r=s(9748),c=s(6433),n=s(1686),d=s(3307),i=s(184),a=s(7033),l=s(3768),u=s(579);const p=e=>{let{onclose:t,setSelectedProducts:s}=e;const[p]=r.A.useForm(),[m,h]=(0,o.useState)([]),[x,g]=(0,o.useState)(!0),v=(0,o.useRef)(null);(0,o.useEffect)((()=>{(async()=>{try{const{data:e}=await a.t$.get("/product-customize/",{headers:{Authorization:`Token ${localStorage.getItem("token")}`}});0===e.length&&((0,l.Ay)("No product available. Try adding products."),t()),h(e)}catch(e){console.error("Failed to fetch products:",e),c.Ay.error("Failed to load products.")}finally{g(!1)}})()}),[t]),(0,o.useEffect)((()=>{const e=e=>{v.current&&!v.current.contains(e.target)&&t()};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[t]);return(0,u.jsxs)("div",{ref:v,className:d.A.invoicepopup,children:[(0,u.jsx)("div",{className:"text-end",children:(0,u.jsx)(i.QCr,{onClick:t})}),x?(0,u.jsxs)("div",{style:{textAlign:"center",padding:"20px"},children:[(0,u.jsx)(n.A,{size:"large"}),(0,u.jsx)("p",{children:"Loading products..."})]}):(0,u.jsx)("div",{style:{display:"flex",justifyContent:"space-evenly",paddingBottom:"16px",overflowX:"scroll",gap:"23px"},children:m.map((e=>(0,u.jsxs)("div",{className:d.A.withoutselectedProducts,onClick:()=>{return t=e.product_id,o=e.name,r=e.image,c=e.count,n=e.price,void s((e=>{const s=e.some((e=>e.product_id===t&&""===e.customize));return s?(l.Ay.error("This product already exists!"),e):[...e,{id:Date.now(),product_id:t,actualcount:c,count:1,name:o,image:r,price:n,customize:""}]}));var t,o,r,c,n},style:{width:"25%",padding:"12px",cursor:"pointer"},children:[(0,u.jsx)("img",{style:{width:"60%",height:"60%"},src:e.image,alt:"product"}),(0,u.jsx)("div",{children:(0,u.jsx)("h3",{className:d.A.invoicepopupname,children:e.name})})]},e.product_id)))})]})}}}]);
//# sourceMappingURL=161.b120ea18.chunk.js.map
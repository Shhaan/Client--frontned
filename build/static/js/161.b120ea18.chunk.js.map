{"version":3,"file":"static/js/161.b120ea18.chunk.js","mappings":"6NAOA,MAoHA,EApHuBA,IAAuC,IAAtC,QAAEC,EAAO,oBAAEC,GAAqBF,EACtD,MAAOG,GAAQC,EAAAA,EAAKC,WACbC,EAASC,IAAcC,EAAAA,EAAAA,UAAS,KAChCC,EAASC,IAAcF,EAAAA,EAAAA,WAAS,GACjCG,GAAWC,EAAAA,EAAAA,QAAO,OAExBC,EAAAA,EAAAA,YAAU,KACcC,WACpB,IACE,MAAM,KAAEC,SAAeC,EAAAA,GAAkBC,IAAI,sBAAuB,CAClEC,QAAS,CAAEC,cAAe,SAASC,aAAaC,QAAQ,cAGtC,IAAhBN,EAAKO,UACPC,EAAAA,EAAAA,IAAM,8CACNtB,KAEFM,EAAWQ,EACb,CAAE,MAAOS,GACPC,QAAQD,MAAM,4BAA6BA,GAC3CE,EAAAA,GAAQF,MAAM,2BAChB,CAAC,QACCd,GAAW,EACb,GAGFiB,EAAe,GACd,CAAC1B,KAEJY,EAAAA,EAAAA,YAAU,KACR,MAAMe,EAAsBC,IACtBlB,EAASmB,UAAYnB,EAASmB,QAAQC,SAASF,EAAMG,SACvD/B,GACF,EAIF,OADAgC,SAASC,iBAAiB,YAAaN,GAChC,KACLK,SAASE,oBAAoB,YAAaP,EAAmB,CAC9D,GACA,CAAC3B,IA8BJ,OACEmC,EAAAA,EAAAA,MAAA,OAAKC,IAAK1B,EAAU2B,UAAWC,EAAAA,EAAMC,aAAaC,SAAA,EAChDC,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,WAAUG,UACvBC,EAAAA,EAAAA,KAACC,EAAAA,IAAO,CAACC,QAAS3C,MAGnBQ,GACC2B,EAAAA,EAAAA,MAAA,OAAKG,MAAO,CAAEM,UAAW,SAAUC,QAAS,QAASL,SAAA,EACnDC,EAAAA,EAAAA,KAACK,EAAAA,EAAI,CAACC,KAAK,WACXN,EAAAA,EAAAA,KAAA,KAAAD,SAAG,4BAGLC,EAAAA,EAAAA,KAAA,OACEH,MAAO,CACLU,QAAS,OACTC,eAAgB,eAChBC,cAAe,OACfC,UAAW,SACXC,IAAK,QACLZ,SAEDnC,EAAQgD,KAAKC,IACZnB,EAAAA,EAAAA,MAAA,OAEEE,UAAWC,EAAAA,EAAMiB,wBACjBZ,QAASA,KACPa,OAtDOC,EAsDKH,EAAEG,WAtDKC,EAsDOJ,EAAEI,KAtDHC,EAsDSL,EAAEK,MAtDJC,EAsDWN,EAAEM,MAtDNC,EAsDaP,EAAEO,WArDlE5D,GAAqB6D,IACnB,MAAMC,EAASD,EAAqBE,MACjC3D,GACCA,EAAQoD,aAAeA,GAAoC,KAAtBpD,EAAQ4D,YAGjD,OAAIF,GACFzC,EAAAA,GAAMC,MAAM,gCACLuC,GAGF,IACFA,EACH,CACEI,GAAIC,KAAKC,MACTX,aACAY,YAAaT,EACbA,MAAO,EACPF,OACAC,QACAE,QACAI,UAAW,IAEd,IAxBeT,IAACC,EAAYC,EAAMC,EAAOC,EAAOC,CAuDxC,EACDvB,MAAO,CAAEgC,MAAO,MAAOzB,QAAS,OAAQ0B,OAAQ,WAAY/B,SAAA,EAE5DC,EAAAA,EAAAA,KAAA,OACEH,MAAO,CAAEgC,MAAO,MAAOE,OAAQ,OAC/BC,IAAKnB,EAAEK,MACPe,IAAI,aAENjC,EAAAA,EAAAA,KAAA,OAAAD,UACEC,EAAAA,EAAAA,KAAA,MAAIJ,UAAWC,EAAAA,EAAMqC,iBAAiBnC,SAAEc,EAAEI,WAbvCJ,EAAEG,kBAmBX,C","sources":["Components/Admin/Invoiceproduct.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport { Form, message, Spin } from \"antd\";\r\nimport style from \"../../Main.module.css\";\r\nimport { FaTimes } from \"react-icons/fa\";\r\nimport { axiosInstancemain } from \"../../Functions/axios\";\r\nimport toast from \"react-hot-toast\";\r\n\r\nconst InvoiceProduct = ({ onclose, setSelectedProducts }) => {\r\n  const [form] = Form.useForm();\r\n  const [product, setProduct] = useState([]);\r\n  const [loading, setLoading] = useState(true); // Loading state\r\n  const modalRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    const fetchCategory = async () => {\r\n      try {\r\n        const { data } = await axiosInstancemain.get(\"/product-customize/\", {\r\n          headers: { Authorization: `Token ${localStorage.getItem(\"token\")}` },\r\n        });\r\n\r\n        if (data.length === 0) {\r\n          toast(\"No product available. Try adding products.\");\r\n          onclose();\r\n        }\r\n        setProduct(data);\r\n      } catch (error) {\r\n        console.error(\"Failed to fetch products:\", error);\r\n        message.error(\"Failed to load products.\");\r\n      } finally {\r\n        setLoading(false); // Stop loading once the fetch is complete\r\n      }\r\n    };\r\n\r\n    fetchCategory();\r\n  }, [onclose]);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (modalRef.current && !modalRef.current.contains(event.target)) {\r\n        onclose();\r\n      }\r\n    };\r\n\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", handleClickOutside);\r\n    };\r\n  }, [onclose]);\r\n\r\n  const handleClick = (product_id, name, image, count, price) => {\r\n    setSelectedProducts((prevSelectedProducts) => {\r\n      const exists = prevSelectedProducts.some(\r\n        (product) =>\r\n          product.product_id === product_id && product.customize === \"\"\r\n      );\r\n\r\n      if (exists) {\r\n        toast.error(\"This product already exists!\");\r\n        return prevSelectedProducts;\r\n      }\r\n\r\n      return [\r\n        ...prevSelectedProducts,\r\n        {\r\n          id: Date.now(),\r\n          product_id,\r\n          actualcount: count,\r\n          count: 1,\r\n          name,\r\n          image,\r\n          price,\r\n          customize: \"\",\r\n        },\r\n      ];\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div ref={modalRef} className={style.invoicepopup}>\r\n      <div className=\"text-end\">\r\n        <FaTimes onClick={onclose} />\r\n      </div>\r\n\r\n      {loading ? ( // Show loading spinner while data is being fetched\r\n        <div style={{ textAlign: \"center\", padding: \"20px\" }}>\r\n          <Spin size=\"large\" />\r\n          <p>Loading products...</p>\r\n        </div>\r\n      ) : (\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            justifyContent: \"space-evenly\",\r\n            paddingBottom: \"16px\",\r\n            overflowX: \"scroll\",\r\n            gap: \"23px\",\r\n          }}\r\n        >\r\n          {product.map((i) => (\r\n            <div\r\n              key={i.product_id} // Add a unique key for better rendering\r\n              className={style.withoutselectedProducts}\r\n              onClick={() =>\r\n                handleClick(i.product_id, i.name, i.image, i.count, i.price)\r\n              }\r\n              style={{ width: \"25%\", padding: \"12px\", cursor: \"pointer\" }}\r\n            >\r\n              <img\r\n                style={{ width: \"60%\", height: \"60%\" }}\r\n                src={i.image}\r\n                alt=\"product\"\r\n              />\r\n              <div>\r\n                <h3 className={style.invoicepopupname}>{i.name}</h3>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default InvoiceProduct;\r\n"],"names":["_ref","onclose","setSelectedProducts","form","Form","useForm","product","setProduct","useState","loading","setLoading","modalRef","useRef","useEffect","async","data","axiosInstancemain","get","headers","Authorization","localStorage","getItem","length","toast","error","console","message","fetchCategory","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","_jsxs","ref","className","style","invoicepopup","children","_jsx","FaTimes","onClick","textAlign","padding","Spin","size","display","justifyContent","paddingBottom","overflowX","gap","map","i","withoutselectedProducts","handleClick","product_id","name","image","count","price","prevSelectedProducts","exists","some","customize","id","Date","now","actualcount","width","cursor","height","src","alt","invoicepopupname"],"sourceRoot":""}